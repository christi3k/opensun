(function(){var a=function(a,b){this.parentNode==b.lastElementChild&&(b.firstElementChild.value=this.textContent,b.firstElementChild.nextSibling.value=JSON.stringify(this.xtag.data),b.xtag.hideSuggestions(),b.firstElementChild.focus(),xtag.fireEvent(b,"change"))};xtag.register("x-autosuggest",{content:'<input type="text" /><input type="hidden" /><ul></ul>',mixins:["request"],getters:{value:function(){return this.firstElementChild.value}},setters:{name:function(a){this.firstElementChild.name=a,this.firstElementChild.nextElementSibling.name=a,this.setAttribute("name",a)}},events:{"dataready:preventable":function(){this.xtag.clearSuggestions(),this.xtag.showSuggestions()},"keydown:keypass(38, 40)":function(a,b){a.preventDefault(),this.xtag.showSuggestions();var c=b.lastElementChild.firstElementChild;if(!c)return b;var d=xtag.query(b,'[selected="true"]')[0];d?(a.keyCode-38?d.nextElementSibling||c:d.previousElementSibling||b.lastElementChild.lastElementChild).focus():c.focus()},"keyup:delegate(input):keystop(9, 13, 16, 17, 32, 37, 38, 39, 40, 91)":function(a,b){var c=b.getAttribute("data-url"),d=b.getAttribute("data-padding")||1;c&&this.value.length>=d&&(b.src=c)},"keyup:delegate(li):keypass(13)":a,"click:delegate(li)":a,"focus:delegate(li)":function(){xtag.query(this.parentNode,'[selected="true"]').forEach(function(a){a.removeAttribute("selected")}),this.setAttribute("selected",!0)},blur:function(a,b){setTimeout(function(){b!=document.activeElement&&!b.contains(document.activeElement)&&b.xtag.hideSuggestions()},1)}},methods:{addSuggestion:function(a,b){var c=document.createElement("li");c.setAttribute("tabindex",0),c.innerHTML=a,c.xtag={data:b},this.lastElementChild.appendChild(c)},clearSuggestions:function(){this.lastElementChild.innerHTML=""},showSuggestions:function(){this.lastElementChild.setAttribute("data-show-suggestions",!0)},hideSuggestions:function(){this.lastElementChild.removeAttribute("data-show-suggestions")}}})})()