(function(){var a=function(a){return{first:1,prev:a.current_page-1,next:a.current_page+1,last:a.pages}},b=function(a){return{current_page:Number(a.getAttribute("data-current-page")),current_offset:Number(a.getAttribute("data-current-offset")),page_size:Number(a.getAttribute("data-page-size")),pages:Number(a.getAttribute("data-pages")),padding:Number(a.getAttribute("data-page-padding")||-1),prevnext:!!a.getAttribute("data-prevnext"),firstlast:!!a.getAttribute("data-firstlast")}};xtag.register("x-pager",{content:'<a data-pager-element="first">first</a><a data-pager-element="prev">previous</a><a data-pager-element="next">next</a><a data-pager-element="last">last</a>',setters:{"data-current-page":function(a){this.setAttribute("data-current-page",a),xtag.tags["x-pager"].onInsert.call(this)}},events:{"tap:delegate(a)":function(c){var d=b(this.parentElement);!d.current_page&&d.current_offset&&d.page_size&&(d.current_page=d.current_offset/d.page_size);var e=a(d);for(var f in e)if(this.getAttribute("data-pager-element")==f)var g=d.current_page=e[f];g||(d.current_page=Number(this.innerHTML)),this.parentElement["data-current-page"]=d.current_page}},onInsert:function(){var c=this,d=b(this),e=this.children.length>4;!d.current_page&&d.current_offset&&d.page_size&&(d.current_page=d.current_offset/d.page_size);var f=function(a){var b=c.getAttribute("data-url");return b?b.replace("{current-page}",a).replace("{current-offset}",d.page_size*a):"#"},g=function(a,b,c){var d=document.createElement("a");return d.setAttribute("href",f(a)),d.innerHTML=c||a,b&&d.setAttribute("selected",!0),d},h=a(d);xtag.query(this,"[data-pager-element]").forEach(function(a){a.href=f(h[a.getAttribute("data-pager-element")])}),d.padding=d.padding==-1?d.pages:d.padding;var i=d.current_page-d.padding<1?1:d.current_page+d.padding>d.pages?d.pages-d.padding*2:d.current_page-d.padding,j=d.current_page+d.padding>d.pages?d.pages:d.current_page-d.padding<1?d.padding*2+1:d.current_page+d.padding;for(var k=i;k<=j;k++)if(e){var l=this.children[k+2-i];l.setAttribute("href",f(k)),l.setAttribute("selected",d.current_page==k),l.innerHTML=k}else{var m=g(k,d.current_page==k);this.insertBefore(m,this.children[this.children.length-2])}this.setAttribute("data-hidefirst",d.firstlast&&d.current_page==1),this.setAttribute("data-hidelast",d.firstlast&&d.current_page==d.pages),this.setAttribute("data-hideprev",d.prevnext&&d.current_page==1),this.setAttribute("data-hidenext",d.prevnext&&d.current_page==d.pages)}})})()