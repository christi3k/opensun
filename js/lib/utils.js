function getShortTimeString(a){return a.toString("HH:mm")}function getShortDateString(a){return a.toString("MMM d, yyyy")}function getJulianDate(a,b,c,d){return 367*a-Math.floor(7/4*(Math.floor((b+9)/12)+a))+Math.floor(275*b/9)+c-730531.5+d/24}function getSunPositionInDegrees(a,b,c){var d=c.getUTCHours()+c.getUTCMinutes()/60,e=getJulianDate(c.getFullYear(),c.getMonth()+1,c.getDate(),d),f=e/36525,g=Math.PI/180,h=357.5291+35999.0503*f-1559e-7*f*f-4.5e-7*f*f*f;h%=360;var i=280.46645+36000.76983*f+3032e-7*f*f;i%=360;var j=(1.9146-.004817*f-14e-6*f*f)*Math.sin(g*h)+(.019993-101e-6*f)*Math.sin(g*2*h)+29e-5*Math.sin(g*3*h),k=i+j,l=23.43999-.013*f,m=1/g*Math.asin(Math.sin(k*g)*Math.sin(l*g)),n=1/g*Math.atan2(Math.cos(l*g)*Math.sin(k*g),Math.cos(k*g));n=(n+360)%360;var o=280.46061837+360.98564736629*e+387933e-9*f*f-f*f*f/3871e4;o=(o+360)%360;var p=o+a,q=p-n,r=(i-n)*4,s=1/g*Math.atan2(-Math.sin(q*g),Math.cos(b*g)*Math.tan(m*g)-Math.sin(b*g)*Math.cos(q*g));s=(s+360)%360;var t=1/g*Math.asin(Math.sin(b*g)*Math.sin(m*g)+Math.cos(b*g)*Math.cos(m*g)*Math.cos(q*g));return{altitude:t,azimuth:s}}function getLightTimes(a,b,c){var d={},e=new Array,f=new Array,g=90,h=-90;for(key in global.firstSunAngles)e.push(global.firstSunAngles[key]),f.push(key);for(var i=0;i<24;i++)for(var j=0;j<60;j++){var k=new Date(c);k.setHours(i),k.setMinutes(j);var l=getSunPositionInDegrees(a,b,k).altitude;l>h&&(h=l),l<g&&(g=l),l>=e[0]&&(d[f[0]]=k,e.shift(),f.shift());if(e.length==0)break}var m=new Array,n=new Array;for(key in global.lastSunAngles)m.push(global.lastSunAngles[key]),n.push(key);for(var i=23;i>=0;i--)for(var j=59;j>=0;j--){var k=new Date(c);k.setHours(i),k.setMinutes(j);var l=getSunPositionInDegrees(a,b,k).altitude;l>h&&(h=l),l<g&&(g=l),l>=m[0]&&(d[n[0]]=k,m.shift(),n.shift());if(m.length==0)break}return d.highest=h,d.lowest=g,d}function getLightRanges(a){return ranges={Predawn:["predawn","morningStart","#C4B11B"],Morning:["morningStart","morningStop","#0F960F"],Evening:["eveningStart","eveningStop","#0F960F"],Twilight:["eveningStop","sunset","#C4B11B"]},a>=40?(ranges["Late Morning"]=["morningStop","highStart","#C4B11B"],ranges["Mid-day"]=["highStart","highStop","#999999"],ranges.Afternoon=["highStop","eveningStart","#C4B11B"]):a>=25?ranges["Mid-day"]=["morningStop","eveningStart","#C4B11B"]:ranges["All Day"]=["morningStart","eveningStop","#0F960F"],ranges}var global=this;global.firstSunAngles={predawn:-1,morningStart:5,morningStop:25,highStart:40},global.lastSunAngles={sunset:-1,eveningStop:5,eveningStart:25,highStop:40}